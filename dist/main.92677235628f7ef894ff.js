(()=>{"use strict";var e,t,r,n,a={373:(e,t,r)=>{r.d(t,{nM:()=>h,Cg:()=>w,ES:()=>f});var n,a,s=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},o=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class i{constructor(e,t){n.set(this,void 0),a.set(this,void 0),this._ready=Promise.resolve(!1),s(this,n,t,"f"),s(this,a,e,"f"),open()}open(){this._ready=this.init()}get ready(){return this._ready}get path(){return o(this,n,"f")}get name(){return o(this,a,"f")}}n=new WeakMap,a=new WeakMap;var c=r(891);const l=r.p+"410df736ae6572cf7a88.json",p=r.p+"b4c8e6307b2c539318bf.json",u=r.p+"e5dd1d7a03e57338707f.json",m=r.p+"9ea6941ad67d37c2d252.json";class d extends i{constructor(e,t){super(e,t)}async init(){return Promise.resolve(!0)}async getAll(){await this._ready;const e=this.extractDataFromStorage();return Promise.resolve(e??[])}async getArray(){await this._ready;const e=this.extractArrayFromStorage();return Promise.resolve(e??[])}async writeAll(e){return await this.ready,this.saveDataToStorage(e),Promise.resolve(!0)}async writeArray(e){return await this.ready,this.saveDataToStorage(e),Promise.resolve(!0)}async delete(){await this.ready,localStorage.removeItem(this.path+"/"+this.name)}extractDataFromStorage(){const e=localStorage.getItem(this.path+"/"+this.name);return e?JSON.parse(e):null}extractArrayFromStorage(){const e=localStorage.getItem(this.path+"/"+this.name);return e?JSON.parse(e):null}saveDataToStorage(e){const t=JSON.stringify(e);localStorage.setItem(this.path+"/"+this.name,t)}get(e){return Promise.resolve([{}])}getByQuery(e){return Promise.resolve([{}])}getNewRecords(e,t){return Promise.resolve([{}])}getByForeignKeys(e,t,r){return Promise.resolve([{}])}}const h=new class extends i{constructor(e,t){super(e,t)}async init(){return Promise.resolve(!0)}async get(e){return Promise.resolve([{}])}async getAll(){return Promise.resolve([{}])}async writeAll(e,t){return Promise.resolve(!0)}async getByQuery(e){return fetch(u).then((e=>e.json()))}async getNewRecords(e,t){let r;switch(e){case c.n.locations:r=l;break;case c.n.complexes:r=p;break;case c.n.apartments:r=u;break;default:return Promise.resolve([])}return fetch(r).then((e=>e.json()))}async getByForeignKeys(e,t,r){let n;switch(e){case c.n.locations:n=l;break;case c.n.complexes:n=p;break;case c.n.apartments:n=u;break;case c.n.users:n=m;break;default:return Promise.resolve([])}return fetch(n).then((e=>e.json())).then((e=>e.filter((e=>r.includes(e[t])))))}}("test","testPath"),f=new d("user","cyprus"),w=new d("favProp","cyprus")},607:(e,t,r)=>{r.a(e,(async(e,t)=>{try{var n=r(138),a=r(578),s=r(312),o=r(891),i=r(840),c=r(942),l=r(945),p=r(320),u=r(848),m=r(373);let d;const h=document.forms.namedItem("log-in"),f=document.querySelector(".log-in button"),w=h.querySelector('button[name="submit"]'),v=await m.ES.getAll(),y=new l.T({name:[],email:[p.u$],phone:[p.Nj,p.er],password:[p.Nj]});if(await(s.k.get(o.n.locations)?.updateFromDB(o.n.locations).then((()=>s.k.get(o.n.complexes)?.updateFromDB(o.n.complexes)))),v.length&&v[0].id){const b=v[0];d=new c.n(b.id,b.email,"",b.name),d.authorized=b.authorized,g(d,h),await s.k.get(o.n.apartments).updateFavoriteFromLocalStorage(d)}function g(e,t){t.querySelector('input[name="u-n"]').setAttribute("value",e.name),t.querySelector('input[name="user-phone"]').setAttribute("value",e.phone),t.querySelector('input[name="user-email"]').setAttribute("value",e.email),e&&e.authorized?(f.textContent="Профиль",w.textContent="Выйти",t.querySelector('input[name="user-phone"]').setAttribute("readOnly","true"),t.querySelector('input[name="user-phone"]').setAttribute("readOnly","true"),t.querySelector('input[name="user-password"]').setAttribute("type","hidden"),document.getElementById("id-pass-label").style.display="none"):(f.textContent="Войти",w.textContent="Войти",t.querySelector('input[name="user-phone"]').removeAttribute("readOnly"),t.querySelector('input[name="user-phone"]').removeAttribute("readOnly"),t.querySelector('input[name="user-password"]').setAttribute("value",""),t.querySelector('input[name="user-password"]').setAttribute("type","password"))}async function _(e,t){if(e.preventDefault(),"Войти"===t.textContent){const e={name:String(new FormData(h).get("user-password")).trim(),phone:String(new FormData(h).get("user-phone")).trim(),email:String(new FormData(h).get("user-email")).trim(),password:String(new FormData(h).get("user-password")).trim()},t=y.validate(e);if((0,u.jY)(document),(0,u.FB)(document,t),t)return;d=new c.n(e.phone,e.email,e.password,e.name),await d.authorize().then((()=>g(d,h))),d.authorized?(document.getElementById("id-log-in").style.display="none",setTimeout((()=>{location.reload()}),100)):document.getElementById("submitError").appendChild((0,u.RX)("Вход не выполнен"))}else d.authorized=!1,m.ES.writeAll([{id:d.phone,email:d.email,name:d.name,password:"",authorized:d.authorized}]),g(d,h),setTimeout((()=>{location.reload()}),100);await s.k.get(o.n.apartments).updateFavoriteFromLocalStorage(d)}h.addEventListener("submit",(e=>_(e,w))),new n.F0([{path:"",page:a.Uv},{path:"cart",page:a.V},{path:"history",page:a.nM,guards:[()=>new Promise((e=>{setTimeout((()=>e(new n.Qq("/"))),2e3)}))]},{path:"complexes",page:a.Oj,resolve:{complexList:()=>s.k.get(o.n.locations)?.updateFromDB(o.n.locations).then((()=>s.k.get(o.n.complexes)?.updateFromDB(o.n.complexes))).then((()=>{const e=s.k.get(o.n.complexes);return Array.from(e.objectList.values())})).catch((()=>!1))}},{path:"complexes/:complexId",page:i.f,resolve:{apartList:e=>{const t=Number(e.params.complexId),r=s.k.get(o.n.apartments);return r.updateByComplexId(e.params.complexId).then((()=>Array.from(r.objectList.values()).filter((e=>e.complex.id===t))))},user:()=>d}},{path:"favorites",page:a.Ge,resolve:{apartList:()=>{const e=s.k.get(o.n.apartments);return e.updateFavoriteFromLocalStorage(d).then((()=>Array.from(e.objectList.values()).filter((t=>e.favoriteList.has(t.id)))))},user:()=>d},guards:[()=>!!d.authorized||new Promise((e=>{setTimeout((()=>e(new n.Qq("/"))),2e3)}))]},{path:"products/:productId",page:a.em}]).start(),t()}catch(x){t(x)}}),1)},223:(e,t,r)=>{r.d(t,{y:()=>n});class n{constructor(e,t="",r="",n=""){this._id=e,this._name=t,this._description=r,this._imgMain=n}fillFromData(e){this._name=e.name,this._description=e.description,this._imgMain=e.imgMain}get id(){return this._id}get name(){return this._name}get description(){return this._description}get imgMain(){return this._imgMain}}},312:(e,t,r)=>{r.d(t,{k:()=>E});var n,a=r(223),s=r(891);class o extends a.y{constructor(e,t,r="",n="",a=0,s=void 0,o=void 0,i=[]){super(e,t,r,n),this._price=a,this._propertyType=s,this._location=o,this._propertyOptions=i}fillFromData(e){super.fillFromData(e),this._propertyOptions=e.propertyOptions.map((e=>e)),this._location=E.get(s.n.locations)?.getItem(e.locationId)}get location(){return this._location}get propertyOptions(){return this._propertyOptions}get propertyType(){return this._propertyType}get price(){return this._price}}class i extends o{constructor(e){super(e),this._commissioningDate="",this._square=0}get roomsNumber(){return this._roomsNumber}get commissioningDate(){return this._commissioningDate}get square(){return this._square}}!function(e){e[e.complex=0]="complex",e[e.apartment=1]="apartment",e[e.house=2]="house"}(n||(n={}));var c,l,p=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},u=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class m extends i{constructor(e){super(e),c.set(this,void 0),l.set(this,void 0),this._propertyType=n.apartment,p(this,l,"","f")}async fillFromDB(){return Promise.resolve(!0)}fillFromData(e){super.fillFromData(e),p(this,c,E.get(s.n.complexes)?.getItem(e.complexId),"f"),this._roomsNumber=e.roomsNumber,this._commissioningDate=e.commissioningDate,this._square=e.square,p(this,l,e.floor,"f"),this._price=e.price}get complex(){return u(this,c,"f")}get floor(){return u(this,l,"f")}}c=new WeakMap,l=new WeakMap,m.tableName=s.n.complexes;var d=r(373);class h{constructor(){this._objectList=new Map}async checkNewItems(e){return await d.nM.getNewRecords(e,Object.keys(this.objectList))}async updateFromDB(e){const t=await this.checkNewItems(e);return t&&this.createNewItems(t),Promise.resolve(!0)}findItem(e){return this._objectList.get(e)}getItem(e,t){let r=this.findItem(e);return r||(r=this.createNewItem(e,t)),r}get objectList(){return this._objectList}}var f,w,v=function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?a.call(e,r):a?a.value=r:t.set(e,r),r},y=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class g extends o{constructor(e){super(e),f.set(this,void 0),w.set(this,void 0),v(this,f,0,"f"),v(this,w,0,"f"),this._propertyType=n.complex}async fillFromDB(){return Promise.resolve(!0)}fillFromData(e){super.fillFromData(e),v(this,f,e.minPrice,"f"),v(this,w,e.maxPrice,"f")}get minPrice(){return y(this,f,"f")}get maxPrice(){return y(this,w,"f")}}f=new WeakMap,w=new WeakMap,g.tableName=s.n.complexes;class _ extends a.y{constructor(e,t,r="",n=""){super(e,t,r,n),this._coordinates={latitude:"",longitude:""}}async fillFromDB(){return Promise.resolve(!0)}fillFromData(e){super.fillFromData(e),this._coordinates.latitude=e.latitude,this._coordinates.longitude=e.longitude}get coordinates(){return this._coordinates}}_.tableName=s.n.locations;const b=new class extends h{constructor(){super()}createNewItems(e){e.forEach((e=>{this.getItem(e.id,e)}))}createNewItem(e,t){const r=new g(e);return t?r.fillFromData(t):r.fillFromDB(),this.objectList.set(e,r),r}},x=new class extends h{constructor(){super()}createNewItems(e){e.forEach((e=>{this.getItem(e.id,e)}))}createNewItem(e,t){const r=new _(e);return t?r.fillFromData(t):r.fillFromDB(),this.objectList.set(e,r),r}},S=new class extends h{constructor(){super(),this._favoriteList=new Set}createNewItems(e){e.forEach((e=>{this.getItem(e.id,e)}))}createNewItem(e,t){const r=new m(e);return t?r.fillFromData(t):r.fillFromDB(),this.objectList.set(e,r),r}async updateByComplexId(e){return d.nM.getByForeignKeys(s.n.apartments,"complexId",[Number(e)]).then((e=>this.createNewItems(e))).then((()=>!0)).catch((()=>!1))}async updateFavoriteFromDB(e){return e.authorized?this.updateFavoriteFromServerDB(e):this.updateFavoriteFromLocalStorage(e)}async updateFavoriteFromServerDB(e){return d.nM.getByForeignKeys(s.n.userFavorites,"userId",[String(e.id)]).then((e=>{const t=e.map((e=>e.apartmentId));return d.nM.getByForeignKeys(s.n.apartments,"id",t)})).then((e=>(this.createNewItems(e),e))).then((e=>{e.forEach((e=>{this._favoriteList.add(e.id)}))})).then((()=>!0)).catch((()=>!1))}async updateFavoriteFromLocalStorage(e){return this._favoriteList.clear(),e.authorized?d.Cg.getArray().then((e=>{const t=e.map((e=>e));return d.nM.getByForeignKeys(s.n.apartments,"id",t)})).then((e=>(this.createNewItems(e),e))).then((e=>{e.forEach((e=>{this._favoriteList.add(e.id)}))})).then((()=>!0)).catch((()=>!1)):Promise.resolve(!0)}async setRemoveApartmentAsFavorite(e,t,r){r?this._favoriteList.add(t):this._favoriteList.delete(t),d.Cg.writeArray(Array.from(this._favoriteList))}get favoriteList(){return this._favoriteList}},E=new Map;E.set(s.n.complexes,b),E.set(s.n.locations,x),E.set(s.n.apartments,S)},891:(e,t,r)=>{var n;r.d(t,{n:()=>n}),function(e){e[e.locations=0]="locations",e[e.complexes=1]="complexes",e[e.properties=2]="properties",e[e.apartments=3]="apartments",e[e.userFavorites=4]="userFavorites",e[e.propertyType=5]="propertyType",e[e.propertyOptions=6]="propertyOptions",e[e.leads=7]="leads",e[e.users=8]="users",e[e.quizzes=9]="quizzes",e[e.quizAnswers=10]="quizAnswers"}(n||(n={}))},275:(e,t,r)=>{var n;r.d(t,{y:()=>a}),function(e){e[e.outdoorPool="outdoorPool"]="outdoorPool",e[e.indoorPool="indoorPool"]="indoorPool",e[e.videoSurveillance="videoSurveillance"]="videoSurveillance",e[e.bar="bar"]="bar",e[e.restaurant="restaurant"]="restaurant",e[e.fitnessRoom="fitnessRoom"]="fitnessRoom"}(n||(n={}));const a=new Map([[n.outdoorPool,"открытый бассейн"],[n.indoorPool,"закрытый бассейн"],[n.videoSurveillance,"видеонаблюдение"],[n.bar,"бар"],[n.restaurant,"ресторан"],[n.fitnessRoom,"фитнес зал"]])},874:(e,t,r)=>{var n;r.d(t,{R:()=>a}),function(e){e[e.studio="studio"]="studio",e[e.onePlusOne="onePlusOne"]="onePlusOne",e[e.twoPlusOne="twoPlusOne"]="twoPlusOne",e[e.threePlusOne="threePlusOne"]="threePlusOne",e[e.fourPlus="fourPlus"]="fourPlus"}(n||(n={}));const a=new Map([[n.studio,"Студия"],[n.onePlusOne,"1+1"],[n.twoPlusOne,"2+1"],[n.threePlusOne,"3+1"],[n.fourPlus,"4+"]])},942:(e,t,r)=>{r.d(t,{n:()=>o});var n=r(373),a=r(223),s=r(891);class o extends a.y{constructor(e,t="",r="",n="",a="",s=""){super(e,n,a,s),this._phone=e,this._email=t,this._password=r,this._authorized=!1}async fillFromDB(){return Promise.resolve(!0)}async authorize(){return this._email||this._phone?n.nM.getByForeignKeys(s.n.users,"id",[String(this._phone)]).then((e=>{e.length||n.nM.writeAll([{id:this._phone,email:this._email,name:this._name,password:this._password}],s.n.users);const t=e[0];return this._authorized=t.password===this._password,this._authorized&&(this._email||(this._email=t.email),this._phone||(this._phone=t.phone),this._name||(this._name=t.name)),n.ES.writeAll([{id:this._phone,email:this._email,name:this._name,password:this._password,authorized:this._authorized}]),this._authorized})).then((e=>e)).catch((e=>!1)):Promise.resolve(!1)}get phone(){return this._phone}get email(){return this._email}get authorized(){return this._authorized}set authorized(e){this._authorized=e}}o.tableName=s.n.users},840:(e,t,r)=>{r.d(t,{f:()=>p});var n=r(312),a=r(891),s=r(275),o=r(874),i=r(138);const c=document.createElement("template"),l=document.createElement("template");c.innerHTML='<div class = "wrapper-complex"> \r\n</div>\r\n  ',l.innerHTML='\x3c!-- <a href="#" class="apartment"> --\x3e\r\n    <section class="apartment-box">\r\n        \x3c!-- <img alt="apartment-img" class="apartment-box__img img"> --\x3e\r\n        <div class="apartment-box__details">\r\n            <h2>\r\n                <button class="apartment-box__like">Отметить</button>\r\n                <span class="apartment-box__roomsNumber"></span>\r\n                <span class="apartment-box__propertySquare"></span>\r\n            </h2>\r\n            <div>\r\n                <span class="apartment-box__price"></span>\r\n                <span class="apartment-box__floor"></span>\r\n                <span class="apartment-box__commissioningDate"></span>                                              \r\n            </div>       \r\n            <p class="apartment-box__propertyOptions text-shadow"></p> \r\n            <p class="apartment-box__description"></p>          \r\n        </div>\r\n    </section>\r\n\x3c!-- </a> --\x3e';class p extends i.FO{render(){const e=n.k.get(a.n.complexes)?.objectList.get(Number(this.routeState.params.complexId))?.name;if(!this.routeState.resolvedData||!this.routeState.resolvedData.apartList)return c.content.cloneNode(!0);const t=this.routeState.resolvedData.apartList.map((e=>{const t=l.content.cloneNode(!0),r=t.querySelector(".apartment-box__like");r.dataset.apartId=e.id,r.textContent=n.k.get(a.n.apartments).favoriteList.has(e.id)?"Снять отметку":"Отметить",this.routeState.resolvedData.user.authorized||r.setAttribute("disabled",""),r.addEventListener("click",(t=>{const s=Number(t.target.dataset.apartId),o=n.k.get(a.n.apartments).favoriteList.has(e.id);r.textContent=o?"Отметить":"Снять отметку",n.k.get(a.n.apartments).setRemoveApartmentAsFavorite(this.routeState.resolvedData.user,s,!o)}));const i=t.querySelector(".apartment-box__roomsNumber"),c=t.querySelector(".apartment-box__propertySquare"),p=t.querySelector(".apartment-box__price"),u=t.querySelector(".apartment-box__floor"),m=t.querySelector(".apartment-box__commissioningDate"),d=t.querySelector(".apartment-box__description"),h=t.querySelector(".apartment-box__propertyOptions");if(e.roomsNumber&&(i.textContent=o.R.get(e.roomsNumber)??null),c.textContent=`${e.square} м2`??0,p.textContent=`цена: ${e.price}$`,m.textContent=`дата сдачи: ${e.commissioningDate?.toString()}`??0,u.textContent=`этаж: ${e.floor}`,e.propertyOptions.length){const t=e.propertyOptions.map((e=>s.y.get(e)));h.innerHTML=`<span>${t.join("</span><span>")}</span>`}return d.textContent=e.description,t})),r=c.content.cloneNode(!0),i=r.querySelector(".wrapper-complex"),p=document.createElement("h1");return p.textContent=e,i.appendChild(p),i.append(...t),r}}},578:(e,t,r)=>{r.d(t,{V:()=>w,Oj:()=>o,Ge:()=>h,nM:()=>f,Uv:()=>y,em:()=>i});var n=r(138);document.createElement("template").innerHTML='<div>\n  <h1>Hello World ILIA</h1>\n  <a is="router-link" href="/cart">rewheryt</a>\n\n  <div class="wrapper">\n\n\n  </div>\n</div>\n';const a=document.createElement("template"),s=document.createElement("template");a.innerHTML='<div class = "wrapper-complexes"> \r\n</div>\r\n  ',s.innerHTML='<a is="router-link" href="#" class="complex">\r\n    <section class="complex-box">\r\n        <div class = "complex-box__img-box"> \r\n            <img class="complex-box__img img-round-border img" alt="complex-img">\r\n        </div>\r\n        <div class="complex-box__description">\r\n            <div>\r\n                <h2 class="complex-box__name"> Name of complex</h2>\r\n                <p class="complex-box__location smallText">Residential area</p>    \r\n            </div>\r\n            <p class="complex-box__prices"> price</p>           \r\n        </div>\r\n    </section>\r\n</a>';class o extends n.FO{render(){if(!this.routeState.resolvedData||!this.routeState.resolvedData.complexList)return a.content.cloneNode(!0);const e=this.routeState.resolvedData.complexList.map((e=>{const t=s.content.cloneNode(!0),r=t.querySelector(".complex-box__img"),n=t.querySelector(".complex"),a=t.querySelector(".complex-box__name"),o=t.querySelector(".complex-box__location"),i=t.querySelector(".complex-box__prices");return n.setAttribute("href",`complexes/${e.id}`),a.textContent=e.name,o.textContent=e.location?.name??null,i.textContent=`цены: ${e.minPrice}$ - ${e.maxPrice}$`,r.setAttribute("src",e.imgMain),t})),t=a.content.cloneNode(!0);return t.querySelector(".wrapper-complexes").append(...e),t}}r(840);class i extends n.FO{render(){const e=document.createElement("div");return e.textContent=`Product: ${this.routeState.params.productId}`,e}}var c=r(312),l=r(891),p=r(275),u=r(874);const m=document.createElement("template"),d=document.createElement("template");m.innerHTML='<div class = "wrapper-complex"> \r\n</div>\r\n  ',d.innerHTML='\x3c!-- <a href="#" class="apartment"> --\x3e\r\n    <section class="apartment-box">\r\n        \x3c!-- <img alt="apartment-img" class="apartment-box__img img"> --\x3e\r\n        <div class="apartment-box__details">\r\n            <h2>\r\n                <button class="apartment-box__like">Отметить</button>\r\n                <span class="apartment-box__roomsNumber"></span>\r\n                <span class="apartment-box__propertySquare"></span>\r\n            </h2>\r\n            <div>\r\n                <span class="apartment-box__price"></span>\r\n                <span class="apartment-box__floor"></span>\r\n                <span class="apartment-box__commissioningDate"></span>                                              \r\n            </div>       \r\n            <p class="apartment-box__propertyOptions text-shadow"></p> \r\n            <p class="apartment-box__description"></p>          \r\n        </div>\r\n    </section>\r\n\x3c!-- </a> --\x3e';class h extends n.FO{render(){if(c.k.get(l.n.complexes)?.objectList.get(Number(this.routeState.params.complexId)),!this.routeState.resolvedData||!this.routeState.resolvedData.apartList)return m.content.cloneNode(!0);const e=this.routeState.resolvedData.apartList.map((e=>{const t=d.content.cloneNode(!0),r=t.querySelector(".apartment-box__like");r.dataset.apartId=e.id,r.textContent=c.k.get(l.n.apartments).favoriteList.has(e.id)?"Снять отметку":"Отметить",r.addEventListener("click",(t=>{const n=Number(t.target.dataset.apartId),a=c.k.get(l.n.apartments).favoriteList.has(e.id);r.textContent=a?"Отметить":"Снять отметку",c.k.get(l.n.apartments).setRemoveApartmentAsFavorite(this.routeState.resolvedData.user,n,!a)}));const n=t.querySelector(".apartment-box__roomsNumber"),a=t.querySelector(".apartment-box__propertySquare"),s=t.querySelector(".apartment-box__price"),o=t.querySelector(".apartment-box__floor"),i=t.querySelector(".apartment-box__commissioningDate"),m=t.querySelector(".apartment-box__description"),h=t.querySelector(".apartment-box__propertyOptions");if(e.roomsNumber&&(n.textContent=u.R.get(e.roomsNumber)??null),a.textContent=`${e.square} м2`??0,s.textContent=`цена: ${e.price}$`,i.textContent=`дата сдачи: ${e.commissioningDate?.toString()}`??0,o.textContent=`этаж: ${e.floor}`,e.propertyOptions.length){const t=e.propertyOptions.map((e=>p.y.get(e)));h.innerHTML=`<span>${t.join("</span><span>")}</span>`}return m.textContent=e.description,t})),t=m.content.cloneNode(!0),r=t.querySelector(".wrapper-complex"),n=document.createElement("h1");return n.textContent="Отмеченные объекты недвижимости",r.appendChild(n),r.append(...e),t}}class f extends n.FO{render(){const e=document.createElement("div");return e.textContent="History",e}}class w extends n.FO{render(){const e=document.createElement("div");return e.textContent="Cart",e}}const v=document.createElement("template");v.innerHTML='<div class="wrapper-first-page">\r\n    <section class="main-info">\r\n        <h1 class="text-shadow">\r\n            <p><span>Недвижимость на Кипре -</span></p>\r\n            <p><span>лучший вариант для</span></p>\r\n            <p><span>жизни </span><span> инвестиций</span><span> отдыха</span></p>\r\n        </h1>\r\n        <div>\r\n            <button>Подсчитать доходность инвестиций</button>\r\n            <button>Узнать больше</button>\r\n        </div>\r\n    </section>\r\n</div>\r\n<div class="additional-info">\r\n    <section class="why-cyprus">\r\n        <h2 class="why-cyprus__header">\r\n            Почему на Кипре?\r\n        </h2>\r\n        <div class="why-cyprus__element">\r\n            Высокий уровень безопасности, отсутствие преступности!\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Защита инвестиций и частной собственности, конфиденциальность!\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Престижные университеты мирового уровня!\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Отсутствие промышленных предприятий!\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Очень приятный и сухой морской климат, а также чистый воздух!\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Бесплатная медицинская помощь\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Разнообразие природного ландшафта\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Экологически чистый регион\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Бесплатное школьное образование\r\n        </div>\r\n        <div class="why-cyprus__element">\r\n            Исторические достопримечательности\r\n        </div>\r\n    </section>\r\n    <section class="why-we">\r\n        <h2 class="why-cyprus__header">\r\n            Почему с нами?\r\n        </h2>\r\n        <div class="why-we__element">\r\n            В нашей базе 500+ юридически проверенных объектов\r\n        </div>\r\n        <div class="why-we__element">\r\n            Официально зарегистрированное агентство на Кипре\r\n        </div>\r\n        <div class="why-we__element">\r\n            Выгодный план платежей: кредит до 20 лет или рассрочка 0%\r\n        </div>\r\n        <div class="why-we__element">\r\n            Оформление ВНЖ, банковского счета и мед. страховки\r\n        </div>\r\n        <div class="why-we__element">\r\n            Бесплатный ознакомительный тур\r\n        </div>\r\n        <div class="why-we__element">\r\n            Страхование каждой сделки на 400.000+ €\r\n        </div>\r\n        <div class="why-we__element">\r\n            Получение гарантированного дохода от аренды до 8% годовых\r\n        </div>\r\n        <div class="why-we__element">\r\n            Сопровождение во всех бытовых и юридических вопросах\r\n        </div>\r\n        <div class="why-we__element">\r\n            Организация онлайн - показа объектов\r\n        </div>\r\n    </section>\r\n</div>';class y extends n.FO{render(){return v.content.cloneNode(!0)}}},138:(e,t,r)=>{r.d(t,{FO:()=>x,Qq:()=>_,F0:()=>M});const n=new class extends EventTarget{};var a,s,o,i=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};customElements.define("router-link",(o=class extends HTMLAnchorElement{constructor(){super(...arguments),a.add(this)}connectedCallback(){this.addEventListener("click",i(this,a,"m",s))}disconnectedCallback(){this.removeEventListener("click",i(this,a,"m",s))}},a=new WeakSet,s=function(e){e.preventDefault(),n.dispatchEvent(new CustomEvent("navigate",{detail:{path:new URL(this.href).pathname}}))},o),{extends:"a"});var c,l,p,u,m,d,h,f,w,v,y=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const g=document.createElement("template");g.innerHTML='\n<style>\n.router-outlet {\n    position: relative;\n}\n</style>\n<div class="router-outlet">\n    <slot name="page"></slot>\n    <slot name="loader"></slot>\n</div>\n'.trim(),customElements.define("router-outlet",(v=class extends HTMLElement{constructor(){super(),c.add(this),l.set(this,this.attachShadow({mode:"open"})),p.set(this,document.createElement("div")),u.set(this,document.createElement("div")),m.set(this,void 0),d.set(this,(()=>{clearTimeout(y(this,m,"f")),function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?a.call(e,r):a?a.value=r:t.set(e,r)}(this,m,setTimeout((()=>{this.appendChild(y(this,p,"f"))}),150),"f")})),h.set(this,(()=>{y(this,c,"m",w).call(this)})),f.set(this,(e=>{const{detail:{content:t}}=e;y(this,u,"f").replaceChildren(t),this.appendChild(y(this,u,"f")),y(this,c,"m",w).call(this)})),y(this,l,"f").appendChild(g.content.cloneNode(!0)),y(this,p,"f").setAttribute("slot","loader"),y(this,u,"f").setAttribute("slot","page"),y(this,p,"f").append(...this.childNodes)}connectedCallback(){n.addEventListener("navigatestart",y(this,d,"f")),n.addEventListener("navigateend",y(this,f,"f")),n.addEventListener("navigatecancel",y(this,h,"f"))}disconnectedCallback(){n.removeEventListener("navigatestart",y(this,d,"f")),n.removeEventListener("navigateend",y(this,f,"f")),n.removeEventListener("navigatecancel",y(this,h,"f"))}},l=new WeakMap,p=new WeakMap,u=new WeakMap,m=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,c=new WeakSet,w=function(){y(this,p,"f").remove(),clearTimeout(y(this,m,"f"))},v));class _ extends String{}var b;class x{constructor(e){b.set(this,void 0),function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?a.call(e,r):a?a.value=r:t.set(e,r)}(this,b,e,"f")}get routeState(){return function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}(this,b,"f")}onRender(){}onDestroy(){}}b=new WeakMap;var S,E,P,T,F,k,L,C,D,q,N,j=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class M{constructor(e){S.add(this),E.set(this,new Map),P.set(this,new WeakMap),T.set(this,new WeakMap),F.set(this,null),e.forEach((e=>{var t;j(this,E,"f").set((t=e.path,new RegExp("/"+t.replace(/:([A-z]+)/g,((e,t)=>`(?<${t}>[^?/]+)`))+"$")),e)}))}navigate(e,t=!1){const r=(n=location.pathname,/^\//.test(a=e)?a:"/"+[n,"/",a].join("").split(/\/+/).reduce(((e,t)=>("."===t||(".."===t?e.pop():t&&e.push(t)),e)),[]).join("/"));var n,a;const[s,o]=j(this,S,"m",k).call(this,r);s&&j(this,S,"m",L).call(this,r,s,o??{},t)}start(){this.navigate(location.pathname),window.addEventListener("popstate",(e=>{this.navigate(e.state.path??location.pathname,!0)})),n.addEventListener("navigate",(e=>{const{detail:{path:t}}=e;this.navigate(t)}))}}function O(e){return"function"==typeof e&&/^class /.test(e.toString())}E=new WeakMap,P=new WeakMap,T=new WeakMap,F=new WeakMap,S=new WeakSet,k=function(e){for(const[t,r]of j(this,E,"f")){const n=t.exec(e);if(n)return[r,n.groups??null]}return[null,null]},L=async function(e,t,r,a){const s={url:new URL(e,location.origin).toString(),params:r,resolvedData:null};n.dispatchEvent(new CustomEvent("navigatestart"));const o=await j(this,S,"m",C).call(this,t,s);if(o){if(o instanceof _)return this.navigate(o.toString());if(s.resolvedData=await j(this,S,"m",D).call(this,t,s),t.redirectTo)return this.navigate(t.redirectTo);if(t.page){const r=new t.page(s),o=r.render();j(this,F,"f")?.onDestroy(),function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?a.call(e,r):a?a.value=r:t.set(e,r)}(this,F,r,"f"),n.dispatchEvent(new CustomEvent("navigateend",{detail:{content:o}})),j(this,F,"f")?.onRender(),a||history.pushState({path:e},"",s.url)}}else n.dispatchEvent(new CustomEvent("navigatecancel"))},C=async function({guards:e},t){if(!e||!e.length)return!0;for(const r of e){const e=await j(this,S,"m",q).call(this,r,t);if(!0!==e)return e}return!0},D=async function({resolve:e},t){return e?Promise.all(Object.entries(e).map((([e,r])=>j(this,S,"m",N).call(this,r,t).then((t=>[e,t]))))).then((e=>Object.fromEntries(e))):null},q=function(e,t){return O(e)?(j(this,P,"f").has(e)||j(this,P,"f").set(e,new e),j(this,P,"f").get(e).canActivate(t)):e(t)},N=async function(e,t){return O(e)?(j(this,T,"f").has(e)||j(this,T,"f").set(e,new e),j(this,T,"f").get(e).resolve(t)):e(t)}},945:(e,t,r)=>{function n(...e){return t=>{for(const r of e){const e=r(t);if(e)return e}return null}}r.d(t,{T:()=>o});var a,s=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class o{constructor(e){a.set(this,void 0),function(e,t,r,n,a){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?a.call(e,r):a?a.value=r:t.set(e,r)}(this,a,new Map,"f");for(const[t,r]of Object.entries(e))s(this,a,"f").set(t,n(...r))}validate(e){const t=[];for(const[r,n]of Object.entries(e)){const e=s(this,a,"f").get(r);if(e){const a=e(n);a&&t.push({[r]:a})}}return t.length?Object.assign({},...t):null}}a=new WeakMap},320:(e,t,r)=>{r.d(t,{Nj:()=>n,er:()=>s,u$:()=>a});const n=e=>e.trim().length?null:{requiredText:"поле обязательно для заполнения."},a=e=>!e.trim().length||/^[\w-\.]+@[\w-]+\.[a-z]{2,4}$/i.test(e)?null:{requiredText:"неверно заполнен e-mail"},s=e=>/^[\d\+][\d\(\)\ -]{4,14}\d$/.test(e)?null:{requiredText:"неверно заполнен телефон"}},848:(e,t,r)=>{function n(e,t){if(t)for(const r in t)s(e,t,r)}function a(e){const t=e.querySelectorAll(".error-list");for(const e of t)e.innerHTML=""}function s(e,t,r){const n=e.getElementById(r+"Error");if(n&&t)for(const e in t[r]){const a=t[r];if(!a||!a[e])continue;const s=o(a[e]);n.appendChild(s)}}function o(e){const t=document.createElement("li");return t.textContent=e,t.style.color="red",t}r.d(t,{FB:()=>n,RX:()=>o,jY:()=>a})}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return a[e](r,r.exports,o),r.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(a,s,o)=>{var i;o&&((i=[]).d=-1);var c,l,p,u=new Set,m=a.exports,d=new Promise(((e,t)=>{p=t,l=e}));d[t]=m,d[e]=e=>(i&&e(i),u.forEach(e),d.catch((e=>{}))),a.exports=d,s((a=>{var s;c=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var s=[];s.d=0,a.then((e=>{o[t]=e,n(s)}),(e=>{o[r]=e,n(s)}));var o={};return o[e]=e=>e(s),o}}var i={};return i[e]=e=>{},i[t]=a,i})))(a);var o=()=>c.map((e=>{if(e[r])throw e[r];return e[t]})),l=new Promise((t=>{(s=()=>t(o)).r=0;var r=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(s.r++,e.push(s)));c.map((t=>t[e](r)))}));return s.r?l:o()}),(e=>(e?p(d[r]=e):l(m),n(i)))),i&&i.d<0&&(i.d=0)},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!e;)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),o(607)})();
//# sourceMappingURL=main.92677235628f7ef894ff.js.map